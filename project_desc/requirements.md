# リコシェロボット（Ricochet Robots）要件定義

## 概要
ブラウザベースのリコシェロボットゲーム。オンライン対戦機能を備え、将来的にCPU対戦モードも実装予定。

## システムアーキテクチャ

### 技術スタック
#### フロントエンド
- フレームワーク: React
- 言語: TypeScript
- スタイリング: Tailwind CSS
- 状態管理: Redux/Context API

#### バックエンド
- サーバー: Node.js + Express
- WebSocket: Socket.io
- 言語: TypeScript

#### テスト
- フレームワーク: Jest
- ユニットテスト
- 統合テスト

## 機能要件

### 1. タイトル画面
- 「みんなで遊ぶ」（オンライン対戦）
- 「CPUと遊ぶ」（将来的な実装）

### 2. オンライン対戦機能
#### 2.1 部屋作成
- 部屋名設定
- パスワード設定
- 部屋の公開機能

#### 2.2 部屋参加
- 公開部屋一覧表示
- パスワード認証

### 3. ゲームプレイ
#### 3.1 ボード管理
- 16種類のボードから4つを選択
- ボードの組み合わせ生成
- ロボットの初期配置（赤・青・黄・緑）

#### 3.2 カードシステム
- 17種類のカード管理
  - 4種類のマーク × 4色
  - 特殊カード（4色混合）
- カードめくり機能
- 目標位置の管理

#### 3.3 ゲームフロー
1. ゲームマスターによるゲーム開始
2. ボード生成とロボット配置
3. カードめくり
4. 手数宣言フェーズ
   - 横スクロール可能な手数選択パネル
   - 宣言後の手数変更（より少ない手数のみ）
5. タイマー管理（1分間）
6. ロボット移動フェーズ
   - 4方向移動矢印表示
   - 手数制限内でのゴール判定
7. 得点付与（成功時1pt）
8. 次のラウンドへ

### 4. 拡張性考慮事項
#### 4.1 CPU対戦モード
- 探索アルゴリズムのインターフェース設計
- 難易度設定機能
- CPU行動決定ロジック

#### 4.2 移動システム
- 移動インターフェースの抽象化
- プレイヤー移動とCPU移動の共通化
- 行動履歴の管理

## 開発フェーズ

### Phase 1: 基盤構築
1. プロジェクトセットアップ
2. 基本的なUI実装
3. WebSocket接続の実装

### Phase 2: コアロジック実装
1. ボード生成システム
2. ロボット配置システム
3. 移動ロジックのインターフェース設計
4. 基本的な移動システム実装

### Phase 3: ゲームプレイ機能
1. 手数宣言システム
2. タイマー実装
3. ターン管理システム
4. 得点システム

### Phase 4: オンライン対戦機能
1. 部屋管理システム
2. プレイヤー同期
3. エラー処理

### Phase 5: 拡張準備
1. 探索アルゴリズムのインターフェース設計
2. テスト環境の整備
3. パフォーマンス最適化